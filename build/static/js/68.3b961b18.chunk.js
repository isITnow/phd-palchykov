"use strict";(self.webpackChunkphd_palchykov=self.webpackChunkphd_palchykov||[]).push([[68],{2739:function(t,e,n){var s=n(2426),a=n.n(s);e.Z=function(t){return{postedDate:a()(t.created_at).fromNow(),editedDate:a()(t.updated_at).fromNow(),isEdited:t.updated_at>t.created_at}}},3604:function(t,e){e.Z=function(t){var e="Prof. Dr. Palchykov";return document.title=t?"".concat(t," | ").concat(e):e}},6008:function(t,e,n){var s=n(1413),a=n(9439),i=n(5987),r=n(2506),c=n(9578),o=n(3329),l=["label"];e.Z=function(t){var e=t.label,n=(0,i.Z)(t,l),d=(0,r.U$)(n.name),u=(0,a.Z)(d,2),m=u[0],x=u[1];return(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("label",{className:"form-label px-3 text-secondary fw-bold",children:e}),(0,o.jsx)("textarea",(0,s.Z)((0,s.Z)((0,s.Z)({},m),n),{},{className:"form-control"})),x.touched&&x.error&&(0,o.jsx)(c.Z,{children:x.error})]})}},6194:function(t,e,n){n.d(e,{Z:function(){return c}});var s=n(1087),a=n(2739),i="post_hoverEffect__GRfm3",r=n(3329),c=function(t){var e,n=t.post,c=t.single,o=(0,a.Z)(n),l=o.postedDate,d=o.editedDate,u=o.isEdited,m=c?null===n||void 0===n||null===(e=n.comments)||void 0===e?void 0:e.length:null===n||void 0===n?void 0:n.comments,x=c?"card shadow":"".concat(i," card");return(0,r.jsxs)("div",{className:x,children:[(0,r.jsxs)("div",{className:"card-header",children:[(0,r.jsxs)("small",{className:"text-primary fw-bold",children:["posted: ",l]}),u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mx-2",children:"|"}),(0,r.jsxs)("small",{className:"text-primary fw-bold",children:["updated: ",d]})]}),!!m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mx-2",children:"|"}),(0,r.jsxs)("small",{className:"text-primary fw-bold",children:["comments: ",m]})]})]}),c?(0,r.jsx)("div",{className:"card-body",children:(0,r.jsx)("p",{className:"card-text",children:n.body})}):(0,r.jsx)(s.rU,{to:"/posts/".concat(n.id),style:{color:"inherit"},children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsx)("p",{className:"card-text text-truncate",children:n.body})})})]})}},5625:function(t,e,n){var s=n(4165),a=n(5861),i=n(2506),r=n(9434),c=n(345),o=n(6008),l=n(7212),d=n(2049),u=n(3329);e.Z=function(t){var e=t.post,n=t.status,m=(0,r.I0)(),x=!e,h=function(){var t=(0,a.Z)((0,s.Z)().mark((function t(n,a){var i,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.body,(r=new FormData).append("post[body]",i.trim()),e?m((0,c.Dm)({id:e.id,post:r})):(m((0,c.Q_)(r)),a.resetForm());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return(0,u.jsx)(i.J9,{initialValues:{body:x?"":e.body},validationSchema:d.U.postSchema,onSubmit:h,children:function(t){var e=t.isSubmitting||"pending"===n,s=x?"Create Post":"Update Post";return(0,u.jsxs)(i.l0,{children:[(0,u.jsx)(o.Z,{label:"Post text",name:"body",type:"text",rows:"3"}),(0,u.jsx)("div",{className:"text-end",children:(0,u.jsx)(l.Z,{text:s,disabled:e})})]})}})}},8061:function(t,e,n){var s=n(7689),a=n(3329);e.Z=function(t){var e=t.path,n=t.children,i=(0,s.s0)();return(0,a.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:function(){return i(e)},children:n})}},598:function(t,e,n){var s=n(3329);e.Z=function(t){var e=t.children;return(0,s.jsx)("section",{className:"py-4",children:e})}},8068:function(t,e,n){n.r(e),n.d(e,{default:function(){return M}});var s=n(9439),a=n(3791),i=n(2333),r=n(2791),c=n(7689),o=n(9434),l=n(345),d=n(4579),u=n(7193),m=n(8070),x=n(8061),h=n(2739),p=n(4522),f=n(4787),b=n(3329),v=function(t){var e=t.comment,n=(0,h.Z)(e),s=n.postedDate,a=(n._,n.__,(0,c.UO)().id),i=(0,o.I0)(),r=(0,p.Z)();return(0,b.jsxs)("div",{className:"py-3",children:[(0,b.jsx)("span",{className:"fw-bold text-primary",children:e.author}),(0,b.jsx)("p",{className:"mt-2 text-break",children:e.body}),(0,b.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,b.jsx)("small",{className:"text-secondary",children:s}),r&&(0,b.jsx)("div",{className:"btn btn-sm btn-danger",onClick:function(){i((0,f.A)({post_id:a,comment_id:e.id}))},children:"delete"})]})]})},j={initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},y=function(t){var e=t.comments;return(0,b.jsx)("ul",{className:"list-group",children:(0,b.jsx)(a.M,{children:e.map((function(t){return(0,b.jsx)(i.E.li,{className:"list-group-item",initial:"initial",animate:"animate",exit:"exit",variants:j,children:(0,b.jsx)(v,{comment:t})},t.id)}))})})},N=function(t){var e=t.text;return(0,b.jsx)("h3",{className:"text-center text-secondary fw-bold",children:e})},Z=n(4165),w=n(5861),k=n(2506),g=n(274),_=n(6193),C=n(6008),D=n(2049),P=function(){var t=(0,o.I0)(),e=(0,c.UO)().id,n=(0,o.v9)(g.zr)||null,s=function(){var n=(0,w.Z)((0,Z.Z)().mark((function n(s,a){var i,r,c;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=s.body,r=s.author,(c=new FormData).append("comment[author]",r.trim()),c.append("comment[body]",i.trim()),t((0,f.G)({post_id:e,comment:c})),a.resetForm();case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}();return(0,b.jsx)(k.J9,{initialValues:{author:n||"",body:""},validationSchema:D.U.commentSchema,onSubmit:s,children:function(t){return(0,b.jsxs)(k.l0,{children:[(0,b.jsx)(_.Z,{label:"Name",name:"author",type:"text",bsclass:"mb-3"}),(0,b.jsx)(C.Z,{label:"Comment",name:"body",type:"text",rows:"3"}),(0,b.jsx)("div",{className:"text-end",children:(0,b.jsx)("button",{disabled:t.isSubmitting,type:"submit",className:"btn btn-primary",children:"Add comment"})})]})}})},U=n(747),E=n(6194),S=n(5625),F=n(598),G=n(3604),I={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},M=function(){(0,G.Z)("Post");var t=(0,c.UO)().id,e=(0,r.useState)(!1),n=(0,s.Z)(e,2),h=n[0],f=n[1],v=(0,o.I0)(),j=(0,c.s0)(),Z=(0,o.v9)(d.zh),w=(0,o.v9)(d.UL),k=!(null===w||void 0===w||!w.length),g=(0,o.v9)(d.fc),_=(0,o.v9)(d.mW),C=(0,m.V)(),D=C.alert,M=C.showAlert,z=(0,p.Z)();(0,r.useEffect)((function(){v((0,l.Gu)(t))}),[v,t]),(0,r.useEffect)((function(){switch(_){case"rejected":M(Z,"danger");break;case"fulfilled":M("Post updated successfully","success"),f(!1);break;case"removed":f(!1),j("/posts");break;case"comment added":M("Comment published successfully","success");break;case"comment removed":f(!1),M("Comment deleted","success")}}),[_]);return"loading"===_?(0,b.jsx)(U.Z,{}):(0,b.jsxs)(F.Z,{children:[(0,b.jsx)(u.Z,{state:D}),g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(E.Z,{post:g,single:!0}),(0,b.jsxs)("div",{className:"mt-3 text-end",children:[(0,b.jsx)(x.Z,{path:"/posts",children:"Go back"}),z&&(0,b.jsxs)("div",{className:"btn-group ms-3",children:[h?(0,b.jsx)(a.M,{children:(0,b.jsx)(i.E.button,{type:"button",initial:"initial",animate:"animate",exit:"exit",variants:I,className:"btn btn-outline-secondary",onClick:function(){return f(!1)},children:"cancel update"},"child")}):(0,b.jsx)(a.M,{children:(0,b.jsx)(i.E.button,{type:"button",initial:"initial",animate:"animate",exit:"exit",variants:I,className:"btn btn-primary",onClick:function(){return f(!0)},children:"edit"},"child")}),(0,b.jsx)("div",{className:"btn btn-danger",onClick:function(){v((0,l.oD)(t))},children:"delete"})]})]}),(0,b.jsx)(a.M,{children:h&&(0,b.jsx)(i.E.div,{initial:"initial",animate:"animate",exit:"exit",variants:I,className:"mt-3",children:(0,b.jsx)(S.Z,{post:g,status:_})},"child")}),(0,b.jsx)(P,{}),(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("div",{className:"mb-3",children:(0,b.jsx)(N,{text:k?"Comments":"No comments"})}),k&&(0,b.jsx)(y,{comments:w})]})]})]})}},4579:function(t,e,n){n.d(e,{P$:function(){return s},UL:function(){return c},fc:function(){return a},mW:function(){return r},zh:function(){return i}});var s=function(t){return t.posts.postsList},a=function(t){return t.posts.onePost},i=function(t){return t.posts.error},r=function(t){return t.posts.status},c=function(t){var e;return null===(e=t.posts.onePost)||void 0===e?void 0:e.comments}}}]);
//# sourceMappingURL=68.3b961b18.chunk.js.map